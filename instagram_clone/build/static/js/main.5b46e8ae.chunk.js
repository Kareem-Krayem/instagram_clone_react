(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{45:function(e,t,a){e.exports=a(71)},50:function(e,t,a){},51:function(e,t,a){},64:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){e.exports=a.p+"static/media/1200px-Instagram_logo.svg.dcc389e5.png"},71:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(15),o=a.n(r),s=(a(50),a(12)),l=(a(51),a(91)),i=a(92),m=a(94),u=a(93),p=a(18),d=a.n(p),g=d.a.initializeApp({apiKey:"AIzaSyDaNVQ-aE94lJatdnBHmu4MpF6YPNHcvac",authDomain:"kareem-instagram-clone.firebaseapp.com",databaseURL:"https://kareem-instagram-clone.firebaseio.com",projectId:"kareem-instagram-clone",storageBucket:"kareem-instagram-clone.appspot.com",messagingSenderId:"967033896911",appId:"1:967033896911:web:d88b0e3e5a19f511601cba",measurementId:"G-Q0YRN3H8C9"}).firestore(),f=d.a.auth(),E=d.a.storage(),h=a(37),v=(a(64),a(95));var b=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],o=a[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),m=i[0],u=i[1];return Object(n.useEffect)((function(){var t;return e.postId&&(t=g.collection("posts").doc(e.postId).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){o(e.docs.map((function(e){return e.data()})))}))),function(){t()}}),[e.postId]),c.a.createElement("div",{className:"post"},c.a.createElement("div",{className:"post__header"},c.a.createElement(v.a,{className:"post__avatar",alt:e.username,src:e.username}),c.a.createElement("h3",null,e.username)),c.a.createElement("img",{src:e.imageUrl,alt:"",className:"post__image"}),c.a.createElement("h4",{className:"post__text"},c.a.createElement("strong",null,e.username," "),e.caption),c.a.createElement("div",{className:"post__comments"},r.map((function(e){return c.a.createElement("p",null,c.a.createElement("b",null,e.username," "),e.text)}))),e.user&&c.a.createElement("form",{className:"post__commentBox"},c.a.createElement("input",{className:"post__input",type:"text",placeholder:"Add a comment..",value:m,onChange:function(e){return u(e.target.value)}}),c.a.createElement("button",{disabled:!m,className:"post__button",type:"submit",onClick:function(t){t.preventDefault(),g.collection("posts").doc(e.postId).collection("comments").add({text:m,username:e.user.displayName,timestamp:d.a.firestore.FieldValue.serverTimestamp()}),u("")}},"Post")))},_=(a(69),a(96));var j=function(e){var t=e.username,a=Object(n.useState)(""),r=Object(s.a)(a,2),o=r[0],l=r[1],i=Object(n.useState)(null),p=Object(s.a)(i,2),f=p[0],h=p[1],v=Object(n.useState)(0),b=Object(s.a)(v,2),j=b[0],N=b[1];return c.a.createElement("div",{className:"imageUpload"},c.a.createElement(_.a,{value:j,variant:"determinate"}),c.a.createElement(m.a,{placeholder:"Enter a caption...",type:"text",value:o,onChange:function(e){return l(e.target.value)}}),c.a.createElement(m.a,{placeholder:"Enter your caption here...",type:"file",onChange:function(e){e.target.files[0]&&h(e.target.files[0])}}),c.a.createElement(u.a,{onClick:function(){E.ref("images/".concat(f.name)).put(f).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);N(t)}),(function(e){console.log(e.message)}),(function(){E.ref("images").child(f.name).getDownloadURL().then((function(e){g.collection("posts").add({timestamp:d.a.firestore.FieldValue.serverTimestamp(),caption:o,imageUrl:e,username:t}),N(0),l(""),h(null)}))}))}},"Upload"))};function N(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var y=Object(l.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var O=function(){var e=a(70),t=y(),r=Object(n.useState)(N),o=Object(s.a)(r,1)[0],l=Object(n.useState)([]),p=Object(s.a)(l,2),d=p[0],E=p[1],v=Object(n.useState)(!1),_=Object(s.a)(v,2),O=_[0],S=_[1],w=Object(n.useState)(!1),C=Object(s.a)(w,2),k=C[0],I=C[1],x=Object(n.useState)(""),U=Object(s.a)(x,2),A=U[0],B=U[1],D=Object(n.useState)(""),L=Object(s.a)(D,2),P=L[0],R=L[1],T=Object(n.useState)(""),W=Object(s.a)(T,2),F=W[0],J=W[1],M=Object(n.useState)(null),H=Object(s.a)(M,2),Q=H[0],V=H[1];return Object(n.useEffect)((function(){var e=f.onAuthStateChanged((function(e){e?(console.log(e),V(e)):V(null)}));return function(){e()}}),[Q,A]),Object(n.useEffect)((function(){g.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){E(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),c.a.createElement("div",{className:"app"},c.a.createElement(i.a,{open:O,onClose:function(){return S(!1)}},c.a.createElement("div",{style:o,className:t.paper},c.a.createElement("form",{className:"app__signup"},c.a.createElement("center",null,c.a.createElement("img",{className:"app__headerImage",src:e,alt:"logo"})),c.a.createElement(m.a,{placeholder:"username",type:"text",value:A,onChange:function(e){return B(e.target.value)}}),c.a.createElement(m.a,{placeholder:"email",type:"text",value:P,onChange:function(e){return R(e.target.value)}}),c.a.createElement(m.a,{placeholder:"password",type:"password",value:F,onChange:function(e){return J(e.target.value)}}),c.a.createElement(u.a,{type:"submit",onClick:function(e){e.preventDefault(),f.createUserWithEmailAndPassword(P,F).then((function(e){return e.user.updateProfile({displayName:A})})).catch((function(e){return alert(e.message)})),S(!1)}},"Sign Up")))),c.a.createElement(i.a,{open:k,onClose:function(){return I(!1)}},c.a.createElement("div",{style:o,className:t.paper},c.a.createElement("form",{className:"app__signup"},c.a.createElement("center",null,c.a.createElement("img",{className:"app__headerImage",src:e,alt:"logo"})),c.a.createElement(m.a,{placeholder:"email",type:"text",value:P,onChange:function(e){return R(e.target.value)}}),c.a.createElement(m.a,{placeholder:"password",type:"password",value:F,onChange:function(e){return J(e.target.value)}}),c.a.createElement(u.a,{type:"submit",onClick:function(e){e.preventDefault(),f.signInWithEmailAndPassword(P,F).catch((function(e){return alert(e.message)})),I(!1)}},"Sign In")))),c.a.createElement("div",{className:"app__header"},c.a.createElement("img",{className:"app__headerImage",src:e,alt:"logo"}),c.a.createElement("div",{className:"app__auth"},Q?c.a.createElement(u.a,{onClick:function(){return f.signOut()}},"Logout"):c.a.createElement("div",{className:"app__loginContainer"},c.a.createElement(u.a,{onClick:function(){return I(!0)}},"Sign In"),c.a.createElement(u.a,{onClick:function(){return S(!0)}},"Signup")))),c.a.createElement("div",{className:"app__posts"},c.a.createElement("div",{className:"app__postsLeft"},d.map((function(e){var t=e.id,a=e.post;return c.a.createElement(b,{key:t,postId:t,user:Q,username:a.username,caption:a.caption,imageUrl:a.imageUrl})}))),c.a.createElement("div",{className:"app_postsRight"},c.a.createElement(h.a,{url:"https://www.instagram.com/p/B3Ae4mcJQrM/?igshid=1x79euy5numgv",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}}))),(null===Q||void 0===Q?void 0:Q.displayName)?c.a.createElement(j,{username:Q.displayName}):c.a.createElement("h3",{style:{textAlign:"center"}},"Sorry you need to login",c.a.createElement("br",null),"To add a post !!!"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.5b46e8ae.chunk.js.map